let Anim={init(t){this.paused=false;this.TAU=Math.PI*2},dispatch(t){let e=Anim,a;switch(t.type){case"start":e.cvs=t.canvas;e.ctx=e.cvs.getContext("2d");e.width=e.cvs.width;e.height=e.cvs.height;e.dispatch({type:"create-scene"});break;case"pause":e.paused=true;break;case"resume":if(e.paused&&e.ctx){e.paused=false;e.draw()}break;case"create-scene":e.maxDepth=64;e.stars=[];let a=192;while(a--){e.stars.push({x:Utils.random(-25,25)|0,y:Utils.random(-25,25)|0,z:Utils.random(1,e.maxDepth)|0})}e.draw();break}},update(t){let e=t.width/2,a=t.height/2,s=t.stars,i=s.length;while(i--){s[i].z-=.015;if(s[i].z<=0){s[i].x=Utils.random(-25,25)|0;s[i].y=Utils.random(-25,25)|0;s[i].z=Utils.random(1,t.maxDepth)|0}}},draw(){let t=Anim,e=t.cvs,a=t.ctx,s=t.width>>1,i=t.height>>1,h=t.stars,r=h.length;t.update(t);e.width=t.width;e.height=t.height;while(r--){k=128/h[r].z,px=h[r].x*k+s,py=h[r].y*k+i;if(px>=0&&px<=t.width&&py>=0&&py<=t.height){let e=1-h[r].z/48,s=Math.max(e,.1)+.45,i=255-Math.round(Math.abs(e*2));a.beginPath();a.fillStyle=`rgba(${i}, ${i}, ${i}, ${e})`;a.arc(px,py,s,0,t.TAU);a.fill()}}if(!t.paused)requestAnimationFrame(t.draw)}};Anim.init();self.onmessage=t=>Anim.dispatch(t.data);let Utils={random(t,e){return Math.random()*(e-t)+t},calculateDistance(t,e,a,s){let i=t-a,h=e-s;return Math.sqrt(i**2+h**2)}};